<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Batucada ‚Ä¢ Morceau</title>
<meta name="theme-color" content="#111" />
<link rel="stylesheet" href="song.css" />
<style>
  .tabNav{max-width:980px;margin:12px auto 0;padding:0 16px;display:flex;gap:8px;flex-wrap:wrap}
  .tabBtn{flex:1;min-width:140px;border:1px solid var(--border,#e6e6e6);background:var(--card,#f6f7f9);color:var(--fg,#111);padding:10px 12px;border-radius:999px;font-weight:600;cursor:pointer;transition:.2s}
  .tabBtn.active{background:var(--accent,#2563eb);color:#fff;border-color:var(--accent,#2563eb)}
  .tabContent{margin:16px auto;max-width:980px;padding:0 16px}
  .tabContent[hidden]{display:none!important}
  .imageGrid{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));margin-top:12px}
  .imageCard{border:1px solid var(--border,#e6e6e6);border-radius:12px;background:var(--card,#f6f7f9);padding:8px;display:flex;flex-direction:column;gap:6px}
  .imageCard img{width:100%;height:140px;object-fit:cover;border-radius:8px;background:#000}
  .imageCard span{font-size:.85rem;font-weight:600}
  .extra-grid{display:grid;gap:10px;margin-top:12px}
  @media(min-width:780px){ .extra-grid{grid-template-columns:repeat(auto-fit,minmax(220px,1fr));} }
  .extra-card{border:1px solid var(--border);border-radius:12px;background:var(--card);padding:12px;display:flex;flex-direction:column;gap:8px}
  .extra-card .title{font-weight:700;font-size:.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .extra-card audio,.extra-card video{width:100%;border-radius:10px}
  .extra-link{display:inline-flex;align-items:center;gap:6px;font-weight:700;text-decoration:none;color:var(--accent)}
  .extra-link::after{content:'‚§ì';font-size:.9rem}
  #notesField{width:100%;border:1px solid var(--border,#e6e6e6);border-radius:12px;padding:12px;font:inherit;line-height:1.5;white-space:pre-wrap;min-height:140px;resize:vertical}
  #errorMessage{max-width:980px;margin:12px auto;}
</style>
</head>
<body id="app" data-theme="">
<header>
  <div class="bar" id="hdr">
    <a class="iconbtn" href="index.html">‚Üê Morceaux</a>
    <div class="title" id="songTitle">Morceau</div>
    <span class="pill">v0.5</span>
    <div class="spacer"></div>
    <button id="themeBtn" class="iconbtn">üåì Th√®me</button>
    <button id="changelogBtn" class="iconbtn">üìù Changelog</button>
  </div>
</header>
<div id="errorMessage" role="status" aria-live="polite"></div>
<div class="tabNav" role="tablist" aria-label="Sections de la page">
  <button class="tabBtn active" data-tab-btn="principal" role="tab" aria-selected="true" aria-controls="tab-principal">Principal (tout)</button>
  <button class="tabBtn" data-tab-btn="audio" role="tab" aria-selected="false" aria-controls="tab-audio" tabindex="-1">Audio & partitions</button>
  <button class="tabBtn" data-tab-btn="lives" role="tab" aria-selected="false" aria-controls="tab-lives" tabindex="-1">Fichiers lives</button>
  <button class="tabBtn" data-tab-btn="instruments" role="tab" aria-selected="false" aria-controls="tab-instruments" tabindex="-1">Instruments individuels</button>
  <button class="tabBtn" data-tab-btn="notes" role="tab" aria-selected="false" aria-controls="tab-notes" tabindex="-1">Notes</button>
  <button class="tabBtn" data-tab-btn="images" role="tab" aria-selected="false" aria-controls="tab-images" tabindex="-1">Images</button>
  <button class="tabBtn" data-tab-btn="autres" role="tab" aria-selected="false" aria-controls="tab-autres" tabindex="-1">Autres</button>
</div>
<div class="playerSticky">
  <section class="playerCard" aria-labelledby="fullTrackTitle">
        <h2 id="fullTrackTitle">√âcoutez le morceau en entier</h2>
    <audio id="player" controls preload="metadata">
      <source id="audioSrc" src="" />
      Votre navigateur ne supporte pas la balise audio.
    </audio>
    <div id="audioDebug" class="audioDebug"></div>
  </section>
</div>
<main>
  <section class="tabContent" id="tab-audio" data-tabs="principal audio">
    <p class="note">Touchez ‚ñ∂ ou le titre d‚Äôune section pour y sauter. Touchez une image pour l‚Äôouvrir en plein √©cran.</p>
    <section aria-labelledby="partsTitle">
      <h2 id="partsTitle" class="sr-only">Sections (partitions)</h2>
      <div id="sections" class="sections"></div>
    </section>
  </section>
  <section class="tabContent" id="tab-lives" data-tabs="principal lives">
    <div id="livesContainer"></div>
  </section>
  <section class="tabContent" id="tab-instruments" data-tabs="principal instruments">
    <div id="instrumentsContainer"></div>
  </section>
  <section class="tabContent" id="tab-notes" data-tabs="principal notes">
    <h3>Notes rapides</h3>
    <textarea id="notesField" rows="12" placeholder="Ajoutez vos id√©es, remarques ou rappels ici."></textarea>
  </section>
  <section class="tabContent" id="tab-images" data-tabs="principal images">
    <h3>Images du morceau</h3>
    <div id="imagesGallery" class="imageGrid"></div>
  </section>
</main>
<!-- Visionneuse plein √©cran -->
<div id="fsOverlay" class="fsOverlay" aria-hidden="true">
  <div class="fsInner" id="fsInner">
    <button id="fsClose" class="fsClose" type="button">‚úï Fermer</button>
    <div class="fsImageWrap" id="fsImageWrap">
      <img id="fsImage" src="" alt="Partition en plein Accran">
    </div>
    <div class="fsMeta">
      <div id="fsLabel" class="fsLabel"></div>
      <div id="fsTime" class="fsTime"></div>
      <div class="fsNavRow">
        <button id="fsPrev" class="fsNavBtn left" type="button"></button>
        <button id="fsNext" class="fsNavBtn right" type="button"></button>
      </div>
      <div class="fsControlsRow">
        <button id="fsPlay" class="fsPlayBtn" type="button">‚ñ∂ Lire √† partir d‚Äôici</button>
        <button id="fsZoom" class="fsZoomBtn" type="button">üîç Zoom</button>      </div>
    </div>
  </div>
</div>
<section id="changelog" class="changelog tabContent" data-tabs="principal autres">
  <h4>Changelog</h4>
  <ul id="changelogList" class="small"></ul>
</section>
<script src="template.js" defer></script>
</body>
</html>
